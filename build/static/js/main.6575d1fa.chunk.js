(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{10:function(t,e,n){"use strict";n.d(e,"b",(function(){return U})),n.d(e,"a",(function(){return F})),n.d(e,"c",(function(){return M}));var r,c,a,u,o,s=n(3),i={registerRequest:Object(s.b)("auth/registerRequest"),registerSuccess:Object(s.b)("auth/registerSuccess"),registerError:Object(s.b)("auth/registerError"),loginRequest:Object(s.b)("auth/loginRequest"),loginSuccess:Object(s.b)("auth/loginSuccess"),loginError:Object(s.b)("auth/loginError"),logoutRequest:Object(s.b)("auth/logoutRequest"),logoutSuccess:Object(s.b)("auth/logoutSuccess"),logoutError:Object(s.b)("auth/logoutError"),getCurrentUserRequest:Object(s.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(s.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(s.b)("auth/getCurrentUserError")},b=n(2),l=n(7),j=i.registerRequest,d=i.registerSuccess,f=i.registerError,O=i.loginRequest,h=i.loginSuccess,g=i.loginError,p=i.logoutRequest,v=i.logoutSuccess,x=i.logoutError,C=i.getCurrentUserRequest,m=i.getCurrentUserSuccess,k=i.getCurrentUserError,_={name:null,email:null},S=Object(s.c)(_,(r={},Object(b.a)(r,i.registerSuccess,(function(t,e){return e.payload.user})),Object(b.a)(r,i.loginSuccess,(function(t,e){return e.payload.user})),Object(b.a)(r,i.logoutSuccess,(function(){return _})),Object(b.a)(r,i.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),E=Object(s.c)(null,(c={},Object(b.a)(c,i.registerSuccess,(function(t,e){return e.payload.token})),Object(b.a)(c,i.loginSuccess,(function(t,e){return e.payload.token})),Object(b.a)(c,i.logoutSuccess,(function(){return null})),c)),A=function(t,e){return e.payload},R=Object(s.c)(null,(a={},Object(b.a)(a,i.registerError,A),Object(b.a)(a,i.loginError,A),Object(b.a)(a,i.logoutError,A),Object(b.a)(a,i.getCurrentUserError,A),a)),y=Object(s.c)(!1,(u={},Object(b.a)(u,i.registerSuccess,(function(){return!0})),Object(b.a)(u,i.loginSuccess,(function(){return!0})),Object(b.a)(u,i.getCurrentUserSuccess,(function(){return!0})),Object(b.a)(u,i.registerError,(function(){return!1})),Object(b.a)(u,i.loginError,(function(){return!1})),Object(b.a)(u,i.getCurrentUserError,(function(){return!1})),Object(b.a)(u,i.logoutSuccess,(function(){return!1})),u)),q=Object(s.c)(!1,(o={},Object(b.a)(o,j,(function(){return!0})),Object(b.a)(o,d,(function(){return!1})),Object(b.a)(o,f,(function(){return!1})),Object(b.a)(o,O,(function(){return!0})),Object(b.a)(o,h,(function(){return!1})),Object(b.a)(o,g,(function(){return!1})),Object(b.a)(o,p,(function(){return!0})),Object(b.a)(o,v,(function(){return!1})),Object(b.a)(o,x,(function(){return!1})),Object(b.a)(o,C,(function(){return!0})),Object(b.a)(o,m,(function(){return!1})),Object(b.a)(o,k,(function(){return!1})),o)),U=Object(l.c)({user:S,isAuthenticated:y,token:E,error:R,loadingAuth:q}),w=n(9),N=n.n(w),L=n(18),z=n(14),T=n.n(z),B=n(22);n(43);T.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var I=function(t){T.a.defaults.headers.common.Authorization="Bearer ".concat(t)},H=function(){T.a.defaults.headers.common.Authorization=""},F={register:function(t){return function(){var e=Object(L.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.registerRequest()),e.prev=1,e.next=4,T.a.post("/users/signup",t);case 4:r=e.sent,I(r.data.token),n(i.registerSuccess(r.data)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),n(i.registerError(e.t0.message)),e.abrupt("return",B.b.error("\u041e\u0448\u0438\u0431\u043a\u0430! \u0412\u0432\u0435\u0434\u0438\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 3-\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0418\u043c\u044f/\u041f\u043e\u0447\u0442\u0430 \u0438 \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u041f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 \u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(L.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutRequest()),t.prev=1,t.next=4,T.a.post("/users/logout");case 4:H(),e(i.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(i.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(L.a)(N.a.mark((function e(n){var r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.loginRequest()),e.prev=1,e.next=4,T.a.post("/users/login",t);case 4:r=e.sent,c=r.data,I(c.token),n(i.loginSuccess(c)),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),n(i.loginError(e.t0.message)),e.abrupt("return",B.b.error("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0442\u0430/\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(L.a)(N.a.mark((function t(e,n){var r,c,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return I(c),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,T.a.get("/users/current");case 8:a=t.sent,e(i.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},M={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getLoadingAuth:function(t){return t.contacts.loadingAuth}}},24:function(t,e,n){t.exports={link:"Navigation_link__12o2K",activeLink:"Navigation_activeLink__2rUFB"}},25:function(t,e,n){t.exports={link:"AuthNav_link__2ejsg",activeLink:"AuthNav_activeLink__3huQJ"}},28:function(t,e,n){t.exports={appear:"PageHeading_appear__xfYdo",appearActive:"PageHeading_appearActive__181zX",position:"PageHeading_position__HA01O",title:"PageHeading_title__1ffyz"}},31:function(t,e,n){t.exports={Container:"UserMenu_Container__2f4HK",Avatar:"UserMenu_Avatar__38zOu",Name:"UserMenu_Name__1deHt"}},41:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return A})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return K}));var r,c,a=n(9),u=n.n(a),o=n(18),s=n(14),i=n.n(s),b=n(3),l={fetchContactsRequest:Object(b.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(b.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(b.b)("contacts/fetchContactsError"),addContactRequest:Object(b.b)("contacts/addContactRequest"),addContactSuccess:Object(b.b)("contacts/addContactSuccess"),addContactError:Object(b.b)("contacts/addContactError"),deleteContactRequest:Object(b.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(b.b)("contacts/deleteContactSuccess"),deleteContactError:Object(b.b)("contacts/deleteContactError"),changeFilter:Object(b.b)("contacts/changeFilter")},j=n(22),d=(n(43),l.fetchContactsRequest),f=l.fetchContactsSuccess,O=l.fetchContactsError,h=l.addContactRequest,g=l.addContactSuccess,p=l.addContactError,v=l.deleteContactRequest,x=l.deleteContactSuccess,C=l.deleteContactError,m={fetchContacts:function(){return function(){var t=Object(o.a)(u.a.mark((function t(e){var n,r,c,a,o,s,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d()),t.prev=1,t.next=4,i.a.get("/contacts");case 4:n=t.sent,r=n.data,e(f(r)),t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(1),c=t.t0.response,a=c.statusText,o=c.status,s=c.data,b="".concat(o," ").concat(a," :").concat(s.message),e(O(t.t0.message)),t.abrupt("return",j.b.error(b));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t,e){return function(){var n=Object(o.a)(u.a.mark((function n(r){var c,a,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:t,number:e},r(h()),n.prev=2,n.next=5,i.a.post("/contacts",c);case 5:a=n.sent,o=a.data,r(g(o)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r(p(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(v()),e.prev=1,e.next=4,i.a.delete("/contacts/".concat(t));case 4:n(x(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(C(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}},k=n(27),_=function(t){return t.contacts.filter},S=function(t){return t.contacts.items},E=Object(k.a)([S],(function(t){return t.length})),A={getLoadingContact:function(t){return t.contacts.loadingContact},getFilter:_,getvisibleContacts:Object(k.a)([S,_],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),getTotalContactCount:E,getAllContacts:S},R=n(2),y=n(29),q=n(7),U=l.fetchContactsRequest,w=l.fetchContactsSuccess,N=l.fetchContactsError,L=l.addContactRequest,z=l.addContactSuccess,T=l.addContactError,B=l.deleteContactRequest,I=l.deleteContactSuccess,H=l.deleteContactError,F=l.changeFilter,M=Object(b.c)([],(r={},Object(R.a)(r,w,(function(t,e){return e.payload})),Object(R.a)(r,z,(function(t,e){return[e.payload].concat(Object(y.a)(t))})),Object(R.a)(r,I,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),P=Object(b.c)("",Object(R.a)({},F,(function(t,e){return e.payload}))),J=Object(b.c)(!1,(c={},Object(R.a)(c,L,(function(){return!0})),Object(R.a)(c,z,(function(){return!1})),Object(R.a)(c,T,(function(){return!1})),Object(R.a)(c,B,(function(){return!0})),Object(R.a)(c,I,(function(){return!1})),Object(R.a)(c,H,(function(){return!1})),Object(R.a)(c,U,(function(){return!0})),Object(R.a)(c,w,(function(){return!1})),Object(R.a)(c,N,(function(){return!1})),c)),G=Object(b.c)(null,{}),K=Object(q.c)({items:M,filter:P,loadingContact:J,error:G})},44:function(t,e,n){t.exports={Button:"Button_Button__3R1xi"}},45:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),c=n(56),a=n.n(c);function u(t){var e=t.children;return Object(r.jsx)("div",{styles:a.a.container,children:e})}},56:function(t,e,n){t.exports={container:"Container_container__3RIox"}},57:function(t,e,n){t.exports={header:"AppBar_header__1Yk8v"}},63:function(t,e,n){},71:function(t,e,n){},94:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(0),a=n.n(c),u=(n(63),n(11)),o=n(38),s=n(39),i=n(42),b=n(40),l=(n(71),n(5)),j=n(45),d=n(57),f=n.n(d),O=n(16),h=n(10),g=n(24),p=n.n(g),v=Object(u.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(r.jsx)("nav",{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(O.b,{to:"/",exact:!0,className:p.a.link,activeClassName:p.a.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),e&&Object(r.jsx)(O.b,{to:"/contacts",exact:!0,className:p.a.link,activeClassName:p.a.activeLink,children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})]})})})),x=n(31),C=n.n(x),m=n.p+"static/media/default-avatar.e44fc4e2.png",k=n(44),_=n.n(k),S={onLogout:h.a.logOut},E=Object(u.b)((function(t){return{name:h.c.getUserName(t),avatar:m}}),S)((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(r.jsxs)("div",{className:C.a.Container,children:[Object(r.jsx)("img",{src:e,alt:"",width:"32",styles:C.a.Avatar}),Object(r.jsxs)("span",{className:C.a.Name,children:["Welcome, ",n]}),Object(r.jsx)("button",{className:_.a.Button,type:"button",onClick:c,children:" Logout"})]})})),A=n(25),R=n.n(A),y=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(O.b,{to:"/register",exact:!0,className:R.a.link,activeClassName:R.a.activeLink,children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(r.jsx)(O.b,{to:"/login",exact:!0,className:R.a.link,activeClassName:R.a.activeLink,children:" \u041b\u043e\u0433\u0438\u043d"})]})},q=n(28),U=n.n(q);function w(t){var e=t.text;return Object(r.jsx)("h1",{className:U.a.title,children:e})}var N=n(96),L=Object(u.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}),null)((function(t){var e=t.isAuthenticated;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(N.a,{classNames:U.a,in:!0,appear:!0,timeout:500,unmountOnExit:!0,children:Object(r.jsx)(w,{text:"Phonebook"})})}),Object(r.jsx)("div",{children:Object(r.jsxs)("header",{className:f.a.header,children:[Object(r.jsx)("div",{children:Object(r.jsx)(v,{})}),e?Object(r.jsx)(E,{}):Object(r.jsx)(y,{})]})})]})})),z=n(22),T=n(21),B=n(30),I=Object(u.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,a=Object(B.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(l.b,Object(T.a)(Object(T.a)({},a),{},{render:function(t){return n?Object(r.jsx)(e,Object(T.a)({},t)):Object(r.jsx)(l.a,{to:c})}}))})),H=Object(u.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,a=Object(B.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(l.b,Object(T.a)(Object(T.a)({},a),{},{render:function(t){return n&&a.restricted?Object(r.jsx)(l.a,{to:c}):Object(r.jsx)(e,Object(T.a)({},t))}}))})),F=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,105))})),M=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,106))})),P=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,107))})),J=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,104))})),G=function(t){Object(i.a)(n,t);var e=Object(b.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(r.jsxs)(j.a,{children:[Object(r.jsx)(L,{}),Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(r.jsxs)(l.d,{children:[Object(r.jsx)(H,{exact:!0,path:"/",component:F}),Object(r.jsx)(H,{path:"/register",restricted:!0,redirectTo:"/contacts",component:M}),Object(r.jsx)(H,{path:"/login",restricted:!0,redirectTo:"/contacts",component:P}),Object(r.jsx)(I,{path:"/contacts",redirectTo:"/login",component:J})]})}),Object(r.jsx)(z.a,{})]})}}]),n}(c.Component),K={onGetCurretnUser:h.a.getCurrentUser},Y=Object(u.b)(null,K)(G),D=n(29),Q=n(41),W=n(3),X=n(19),V=n(58),Z=n.n(V),$=Object(D.a)(Object(W.d)({serializableCheck:{ignoredActions:[X.a,X.f,X.b,X.c,X.d,X.e]}})),tt={key:"auth",storage:Z.a,whitelist:["token"]},et=Object(W.a)({reducer:{auth:Object(X.g)(tt,h.b),contacts:Q.c,error:Object(W.c)(null,{})},middleware:$,devTools:!1}),nt={store:et,persistor:Object(X.h)(et)},rt=n(17),ct=n(59);Object(rt.render)(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(u.a,{store:nt.store,children:Object(r.jsx)(ct.a,{loading:null,persistor:nt.persistor,children:Object(r.jsx)(O.a,{children:Object(r.jsx)(Y,{})})})})}),document.getElementById("root"))}},[[94,2,3]]]);
//# sourceMappingURL=main.6575d1fa.chunk.js.map